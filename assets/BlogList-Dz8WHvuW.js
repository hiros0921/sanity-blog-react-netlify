import{j as e,m as n,L as m,a8 as g,O as y,C as h,a9 as f,c as x,r as d}from"./react-vendor-CeN1yosF.js";import{u as b,c as p}from"./sanity-BKlHiFMk.js";import{S as w}from"./SEO-BnnyCx6E.js";import{u as j}from"./index-cbB5AewJ.js";import{O as u}from"./OptimizedImage-D7BCwoN9.js";function N({post:a,index:l}){const{value:s,recordConversion:c}=j({id:"blog_card_layout",variants:{A:{layout:"grid",showImage:!0,showSummary:!0,showReadTime:!0,showCategories:!0,ctaStyle:"text",hoverEffect:"scale"},B:{layout:"list",showImage:!0,showSummary:!1,showReadTime:!0,showCategories:!1,ctaStyle:"arrow",hoverEffect:"shadow"}}}),t=()=>{c()},r={scale:{scale:1.02},shadow:{boxShadow:"0 10px 30px rgba(0,0,0,0.1)"},border:{borderColor:"rgb(59, 130, 246)"}};return s.layout==="list"?e.jsx(n.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},whileHover:r[s.hoverEffect],className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden transition-all duration-300 border border-gray-200 dark:border-gray-700",children:e.jsxs(m,{to:`/post/${a.slug}`,onClick:t,className:"flex gap-6 p-6",children:[s.showImage&&a.mainImage&&e.jsx("div",{className:"flex-shrink-0 w-32 h-32",children:e.jsx(u,{src:a.mainImage.url,alt:a.mainImage.alt||a.title,width:128,height:128,className:"w-full h-full object-cover rounded-lg"})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 line-clamp-2",children:a.title}),s.showSummary&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 line-clamp-2 mb-3",children:a.summary}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mt-auto",children:[e.jsxs("time",{className:"flex items-center gap-1",children:[e.jsx(y,{className:"w-4 h-4"}),g(new Date(a.publishedAt),"yyyy年MM月dd日",{locale:x})]}),s.showReadTime&&a.estimatedReadingTime&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-4 h-4"}),a.estimatedReadingTime,"分"]}),s.ctaStyle==="arrow"&&e.jsx(f,{className:"w-5 h-5 ml-auto text-blue-500"})]})]})]})}):e.jsx(n.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},whileHover:r[s.hoverEffect],className:"bg-white dark:bg-gray-800 rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300",children:e.jsxs(m,{to:`/post/${a.slug}`,onClick:t,className:"block",children:[s.showImage&&a.mainImage&&e.jsx("div",{className:"aspect-w-16 aspect-h-9",children:e.jsx(u,{src:a.mainImage.url,alt:a.mainImage.alt||a.title,width:400,height:225,className:"w-full h-48 object-cover"})}),e.jsxs("div",{className:"p-6",children:[s.showCategories&&a.categories&&a.categories.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:a.categories.map((i,o)=>e.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs rounded-full",children:i.title},o))}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-3 line-clamp-2",children:a.title}),s.showSummary&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 line-clamp-3 mb-4",children:a.summary}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("time",{children:g(new Date(a.publishedAt),"yyyy年MM月dd日",{locale:x})}),s.showReadTime&&a.estimatedReadingTime&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-4 h-4"}),a.estimatedReadingTime,"分"]})]}),s.ctaStyle==="text"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"続きを読む →"})]})]})]})})}const v=`*[_type == "post"] | order(publishedAt desc) {
  _id,
  _createdAt,
  title,
  slug,
  author->{
    _id,
    name,
    image
  },
  mainImage,
  categories[]->{
    _id,
    title,
    slug
  },
  publishedAt,
  excerpt
}`;function S(){const[a,l]=d.useState([]),[s,c]=d.useState(!0);return d.useEffect(()=>{(async()=>{try{console.log("Fetching posts...");const r=await p.fetch(v);console.log("Fetched data:",r),l(r)}catch(r){console.error("Error fetching posts:",r),l([{_id:"1",_createdAt:"2025-01-01T00:00:00Z",title:"テスト記事1",slug:{current:"test-post-1"},author:{_id:"1",name:"テスト著者"},publishedAt:"2025-01-01T00:00:00Z",excerpt:"これはテスト記事です。Sanity APIに接続できない場合のデモ用データです。",mainImage:{asset:{_id:"image-1",url:"https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=800&q=80"},alt:"Blog post image"}},{_id:"2",_createdAt:"2025-01-02T00:00:00Z",title:"テスト記事2",slug:{current:"test-post-2"},author:{_id:"1",name:"テスト著者"},publishedAt:"2025-01-02T00:00:00Z",excerpt:"2つ目のテスト記事です。",categories:[{_id:"1",title:"テスト",slug:{current:"test"}}],mainImage:{asset:{_id:"image-2",url:"https://images.unsplash.com/photo-1520085601670-ee14aa5fa3e8?w=800&q=80"},alt:"Blog post image"}}])}finally{c(!1)}})()},[]),s?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Blog Posts",description:"Read our latest blog posts and articles"}),e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:e.jsxs("div",{className:"container mx-auto px-4 py-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-5xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Blog Posts"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300",children:"Discover our latest thoughts and insights"})]}),a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"No blog posts found."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Check the browser console for any errors."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map((t,r)=>{const i={_id:t._id,title:t.title,slug:t.slug.current,summary:t.excerpt||"",publishedAt:t.publishedAt,mainImage:t.mainImage?{url:b(t.mainImage),alt:t.mainImage.alt}:void 0,categories:t.categories?.map(o=>({title:o.title})),estimatedReadingTime:Math.ceil((t.excerpt?.length||200)/200)};return e.jsx(N,{post:i,index:r},t._id)})})]})})]})}export{S as default};
