const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PremiumHomePage-I57hayTA.js","assets/react-vendor-CeN1yosF.js","assets/sanity-BKlHiFMk.js","assets/OptimizedImage-D7BCwoN9.js","assets/SEO-BnnyCx6E.js","assets/BlogList-Dz8WHvuW.js","assets/BlogPost-C1PxGipO.js","assets/EnhancedSEO-B35uikUk.js","assets/bookmarks-CJdUwcE9.js","assets/VideosPage-BW6gDfOR.js","assets/UpdatedProfilePage-BdZSQ1cY.js","assets/ContactPage-CjJ6mxU9.js","assets/CodeDemoPage-D3ALOdrR.js","assets/BookmarksDashboard-DOlftqH-.js"])))=>i.map(i=>d[i]);
import{r as i,u as F,j as e,S as O,A as _,m as x,X as P,F as $,C as K,T as V,B as M,a as B,f as U,M as R,b as H,R as J,c as X,L as v,d as Y,e as G,g as q,h as Z,i as Q,G as ee,k as te,Y as se,H as ae,l as W,W as ne,D as re,n as ie,o as oe,p as ce,q as z,s as le,_ as S,t as de,v as me,w as ue,x as k,y as he}from"./react-vendor-CeN1yosF.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();function ge(){const[a,t]=i.useState(!1),[s,r]=i.useState(""),[n,o]=i.useState([]),[d,l]=i.useState([]),[m]=i.useState(["React","TypeScript","Next.js","Tailwind CSS"]),[u,g]=i.useState(!1),[p,b]=i.useState([]),y=i.useRef(null),w=F();i.useEffect(()=>{const c=f=>{(f.metaKey||f.ctrlKey)&&f.key==="k"&&(f.preventDefault(),t(!0)),f.key==="Escape"&&t(!1)};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]),i.useEffect(()=>{a&&y.current&&y.current.focus()},[a]),i.useEffect(()=>{const c=localStorage.getItem("recentSearches");c&&l(JSON.parse(c))},[]);const C=async c=>{if(!c.trim()){o([]);return}g(!0);try{const I=[{id:"1",title:"React 18の新機能完全ガイド",excerpt:"React 18で追加された新機能について詳しく解説します。Concurrent Features、Automatic Batching、新しいHooksなど...",type:"post",url:"/post/react-18-guide",publishedAt:"2025-01-15",highlights:[c],category:"React"},{id:"2",title:"TypeScript 5.0の型システム解説",excerpt:"TypeScript 5.0で強化された型システムの新機能を実例とともに解説。より安全で表現力豊かなコードを...",type:"post",url:"/post/typescript-5-types",publishedAt:"2025-01-10",highlights:[c],category:"TypeScript"},{id:"3",title:"Next.js 14でフルスタックアプリを構築",excerpt:"Next.js 14の新機能を活用して、モダンなフルスタックアプリケーションを構築する方法を解説...",type:"video",url:"/videos",publishedAt:"2025-01-05",category:"Next.js"}].filter(N=>p.length===0?!0:p.includes(N.type));o(I);const A=[c,...d.filter(N=>N!==c)].slice(0,5);l(A),localStorage.setItem("recentSearches",JSON.stringify(A))}catch(f){console.error("Search error:",f),o([])}finally{g(!1)}};i.useEffect(()=>{const c=setTimeout(()=>{C(s)},300);return()=>clearTimeout(c)},[s,p]);const E=c=>{t(!1),w(c.url)},h=c=>{b(f=>f.includes(c)?f.filter(I=>I!==c):[...f,c])};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>t(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"検索..."}),e.jsxs("kbd",{className:"hidden sm:inline-flex items-center gap-1 px-2 py-1 text-xs bg-white dark:bg-gray-900 rounded border border-gray-300 dark:border-gray-600",children:[e.jsx("span",{className:"text-xs",children:navigator.platform.includes("Mac")?"⌘":"Ctrl+"}),"K"]})]}),e.jsx(_,{children:a&&e.jsxs(e.Fragment,{children:[e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>t(!1),className:"fixed inset-0 bg-black/50 z-50"}),e.jsxs(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"fixed top-20 left-1/2 -translate-x-1/2 w-full max-w-2xl bg-white dark:bg-gray-900 rounded-xl shadow-2xl z-50 max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"w-5 h-5 text-gray-400"}),e.jsx("input",{ref:y,type:"text",value:s,onChange:c=>r(c.target.value),placeholder:"記事、動画、コードを検索...",className:"flex-1 bg-transparent outline-none text-lg"}),e.jsx("button",{onClick:()=>t(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded",children:e.jsx(P,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx($,{className:"w-4 h-4 text-gray-400"}),["post","video","code"].map(c=>e.jsx("button",{onClick:()=>h(c),className:`px-3 py-1 text-sm rounded-full transition-colors ${p.includes(c)?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:c==="post"?"記事":c==="video"?"動画":"コード"},c))]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:u?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-gray-300 border-t-blue-500"})}):n.length>0?e.jsx("div",{className:"p-2",children:n.map(c=>e.jsx("button",{onClick:()=>E(c),className:"w-full p-3 text-left hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-800 rounded",children:c.type==="post"?"📝":c.type==="video"?"🎥":"💻"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:c.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:c.excerpt}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-500",children:[c.category&&e.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 rounded",children:c.category}),e.jsx("time",{children:new Date(c.publishedAt).toLocaleDateString("ja-JP")})]})]})]})},c.id))}):s?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:["「",s,"」に一致する結果が見つかりませんでした"]}):e.jsxs("div",{className:"p-4",children:[d.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[e.jsx(K,{className:"w-4 h-4"}),"最近の検索"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(c=>e.jsx("button",{onClick:()=>r(c),className:"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-800 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:c},c))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[e.jsx(V,{className:"w-4 h-4"}),"人気の検索"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(c=>e.jsx("button",{onClick:()=>r(c),className:"px-3 py-1 text-sm bg-gray-100 dark:bg-gray-800 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:c},c))})]})]})})]})]})})]})}class j{static instance;comments=new Map;notifications=[];subscribers=new Set;ws=null;constructor(){this.loadFromStorage(),this.initializeWebSocket()}static getInstance(){return j.instance||(j.instance=new j),j.instance}initializeWebSocket(){typeof window<"u"&&"WebSocket"in window}generateMockComment(){const t=Array.from(this.comments.keys());if(t.length===0)return null;const s=t[Math.floor(Math.random()*t.length)],r=["田中太郎","山田花子","鈴木一郎","佐藤美咲"],n=["とても参考になりました！","素晴らしい記事ですね。","もっと詳しく知りたいです。","これは試してみます！"];return{id:`comment-${Date.now()}-${Math.random()}`,postId:s,author:{name:r[Math.floor(Math.random()*r.length)],email:"mock@example.com",avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${Math.random()}`},content:n[Math.floor(Math.random()*n.length)],createdAt:new Date().toISOString(),status:"pending",likes:0}}handleNewComment(t){const s=this.comments.get(t.postId)||[];s.push(t),this.comments.set(t.postId,s);const r={id:`notif-${Date.now()}`,type:t.parentId?"reply":"new_comment",comment:t,timestamp:new Date().toISOString(),read:!1};this.notifications.unshift(r),this.saveToStorage(),this.subscribers.forEach(n=>n(r))}async postComment(t){const s={...t,id:`comment-${Date.now()}-${Math.random()}`,createdAt:new Date().toISOString(),likes:0},r=this.comments.get(t.postId)||[];if(t.parentId){const n=r.findIndex(o=>o.id===t.parentId);n!==-1&&(r[n].replies||(r[n].replies=[]),r[n].replies.push(s))}else r.push(s);return this.comments.set(t.postId,r),this.saveToStorage(),this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"new_comment",comment:s})),this.handleNewComment(s),s}getComments(t,s=!1){return(this.comments.get(t)||[]).filter(n=>s||n.status!=="deleted")}async moderateComment(t,s){for(const[r,n]of this.comments){const o=n.findIndex(d=>d.id===t);if(o!==-1){n[o].status=s==="delete"?"deleted":s==="approve"?"approved":"spam",this.comments.set(r,n),this.saveToStorage();const d={id:`notif-${Date.now()}`,type:"moderation",comment:n[o],timestamp:new Date().toISOString(),read:!1};this.notifications.unshift(d),this.subscribers.forEach(l=>l(d));break}}}async likeComment(t){for(const[s,r]of this.comments){const n=r.find(o=>o.id===t);if(n){n.likes++,this.comments.set(s,r),this.saveToStorage();break}}}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}getNotifications(t=!1){return t?this.notifications.filter(s=>!s.read):this.notifications}markNotificationAsRead(t){const s=this.notifications.find(r=>r.id===t);s&&(s.read=!0,this.saveToStorage())}markAllNotificationsAsRead(){this.notifications.forEach(t=>t.read=!0),this.saveToStorage()}loadFromStorage(){try{const t=localStorage.getItem("blog_comments");if(t){const r=JSON.parse(t);this.comments=new Map(Object.entries(r))}const s=localStorage.getItem("comment_notifications");s&&(this.notifications=JSON.parse(s))}catch(t){console.error("Failed to load comments from storage:",t)}}saveToStorage(){try{const t=Object.fromEntries(this.comments);localStorage.setItem("blog_comments",JSON.stringify(t)),localStorage.setItem("comment_notifications",JSON.stringify(this.notifications))}catch(t){console.error("Failed to save comments to storage:",t)}}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}}function Qe(a){const t=j.getInstance(),[s,r]=i.useState([]),[n,o]=i.useState(!0);i.useEffect(()=>{r(t.getComments(a)),o(!1)},[a]);const d=i.useCallback(async m=>{const u=await t.postComment({...m,postId:a});return r(t.getComments(a)),u},[a]),l=i.useCallback(async m=>{await t.likeComment(m),r(t.getComments(a))},[a]);return{comments:s,loading:n,postComment:d,likeComment:l}}function xe(){const a=j.getInstance(),[t,s]=i.useState([]),[r,n]=i.useState(0);i.useEffect(()=>{const l=()=>{const u=a.getNotifications();s(u),n(u.filter(g=>!g.read).length)};return l(),a.subscribe(()=>{l()})},[]);const o=i.useCallback(l=>{a.markNotificationAsRead(l),s(a.getNotifications()),n(a.getNotifications(!0).length)},[]),d=i.useCallback(()=>{a.markAllNotificationsAsRead(),s(a.getNotifications()),n(0)},[]);return{notifications:t,unreadCount:r,markAsRead:o,markAllAsRead:d}}function pe(){const a=j.getInstance();return{moderateComment:i.useCallback(async(s,r)=>{await a.moderateComment(s,r)},[])}}const fe=j.getInstance();function ye(){const{notifications:a,unreadCount:t,markAsRead:s,markAllAsRead:r}=xe(),[n,o]=i.useState(!1);return i.useEffect(()=>{if("Notification"in window&&Notification.permission==="granted"){const d=a.find(l=>!l.read);if(d&&t>0){const l=d.type==="new_comment"?"新しいコメント":d.type==="reply"?"返信":"モデレーション";new Notification(l,{body:`${d.comment.author.name}: ${d.comment.content.slice(0,50)}...`,icon:"/icon-192x192.png",tag:d.id})}}},[t]),e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>o(!n),className:"relative p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[e.jsx(M,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),t>0&&e.jsx(x.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:t>9?"9+":t})]}),e.jsx(_,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>o(!1),className:"fixed inset-0 z-40"}),e.jsxs(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-96 bg-white dark:bg-gray-900 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 z-50 max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"通知"}),e.jsxs("div",{className:"flex items-center gap-2",children:[t>0&&e.jsxs("button",{onClick:r,className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(B,{className:"w-4 h-4"}),"すべて既読"]}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(P,{className:"w-5 h-5"})})]})]})}),e.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:a.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"通知はありません"}):e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.slice(0,20).map(d=>e.jsx(be,{notification:d,onRead:()=>s(d.id)},d.id))})})]})]})})]})}function be({notification:a,onRead:t}){const s=()=>{a.read||t()};return e.jsx(x.div,{onClick:s,className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition-colors ${a.read?"":"bg-blue-50/50 dark:bg-blue-900/20"}`,initial:{opacity:0},animate:{opacity:1},children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${a.type==="new_comment"?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":a.type==="reply"?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:ve(a.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:we(a.type)}),e.jsx("time",{className:"text-xs text-gray-500 dark:text-gray-400",children:U(new Date(a.timestamp),{addSuffix:!0,locale:X})})]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:a.comment.author.name}),": ",e.jsx("span",{className:"truncate",children:a.comment.content.length>50?a.comment.content.slice(0,50)+"...":a.comment.content})]}),!a.read&&e.jsx("span",{className:"inline-block w-2 h-2 bg-blue-500 rounded-full mt-2"})]})]})})}function ve(a){switch(a){case"new_comment":return e.jsx(R,{className:"w-4 h-4"});case"reply":return e.jsx(J,{className:"w-4 h-4"});case"moderation":return e.jsx(H,{className:"w-4 h-4"});default:return e.jsx(R,{className:"w-4 h-4"})}}function we(a){switch(a){case"new_comment":return"新しいコメント";case"reply":return"返信";case"moderation":return"モデレーション";default:return"お知らせ"}}function je(){const[a,t]=i.useState(!1),[s,r]=i.useState(!0),[n,o]=i.useState(!1);i.useEffect(()=>{document.documentElement.classList.add("dark");const l=()=>{o(window.scrollY>20)};return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]);const d=()=>{r(!s),document.documentElement.classList.toggle("dark")};return e.jsxs(x.header,{initial:{y:-100},animate:{y:0},transition:{duration:.5},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${n?"py-2 blur-background":"py-4"}`,children:[e.jsx("div",{className:`absolute inset-0 transition-all duration-300 ${n?"bg-black/80 backdrop-blur-xl":"bg-transparent"}`}),e.jsxs("div",{className:"relative container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(v,{to:"/",className:"flex items-center space-x-3 group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center transform group-hover:rotate-12 transition-transform duration-300",children:e.jsx(Y,{className:"w-7 h-7 text-white"})}),e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl blur opacity-30 group-hover:opacity-50 transition-opacity duration-300"})]}),e.jsx("span",{className:"text-2xl font-black text-white font-display",children:"HiroSuwa"})]}),e.jsx("nav",{className:"hidden lg:flex items-center space-x-8",children:[{name:"Home",path:"/"},{name:"Blog",path:"/blog"},{name:"Videos",path:"/videos"},{name:"Code",path:"/code-samples"},{name:"Library",path:"/library"},{name:"Profile",path:"/profile"},{name:"Contact",path:"/contact"}].map(l=>e.jsxs(v,{to:l.path,className:"relative text-gray-300 hover:text-white transition-colors duration-300 font-medium group",children:[l.name,e.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-gradient-to-r from-blue-600 to-purple-600 group-hover:w-full transition-all duration-300"})]},l.name))}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(ge,{}),e.jsx("div",{className:"relative",children:e.jsx(ye,{})}),e.jsx("button",{onClick:d,className:"p-2 text-gray-300 hover:text-white transition-colors duration-300",children:e.jsx(_,{mode:"wait",children:s?e.jsx(x.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:e.jsx(G,{className:"w-5 h-5"})},"sun"):e.jsx(x.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:e.jsx(q,{className:"w-5 h-5"})},"moon")})}),e.jsx(v,{to:"/contact",className:"hidden md:block px-6 py-2 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold hover:shadow-lg hover:shadow-purple-500/25 transform hover:-translate-y-0.5 transition-all duration-300",children:"Get Started"}),e.jsx("button",{onClick:()=>t(!a),className:"lg:hidden p-2 text-gray-300 hover:text-white transition-colors duration-300",children:a?e.jsx(P,{className:"w-6 h-6"}):e.jsx(Z,{className:"w-6 h-6"})})]})]}),e.jsx(_,{children:a&&e.jsx(x.nav,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"lg:hidden mt-4 overflow-hidden",children:e.jsxs("div",{className:"flex flex-col space-y-4 py-4",children:[[{name:"Home",path:"/"},{name:"Blog",path:"/blog"},{name:"Videos",path:"/videos"},{name:"Code",path:"/code-samples"},{name:"Library",path:"/library"},{name:"Profile",path:"/profile"},{name:"Contact",path:"/contact"}].map((l,m)=>e.jsx(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:m*.1},children:e.jsx(v,{to:l.path,onClick:()=>t(!1),className:"block text-gray-300 hover:text-white transition-colors duration-300 font-medium",children:l.name})},l.name)),e.jsx(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.5},children:e.jsx(v,{to:"/contact",onClick:()=>t(!1),className:"inline-block px-6 py-2 rounded-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-semibold",children:"Get Started"})})]})})})]})]})}function Ne(){const a=new Date().getFullYear();return e.jsx("footer",{className:"bg-gray-900 dark:bg-black text-white transition-colors duration-300",children:e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsxs(v,{to:"/",className:"flex items-center space-x-2 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"B"})}),e.jsx("span",{className:"text-xl font-bold",children:"ModernBlog"})]}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Sharing knowledge through articles and videos about web development and technology."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(Q,{className:"w-5 h-5"})}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(ee,{className:"w-5 h-5"})}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(te,{className:"w-5 h-5"})}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(se,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(v,{to:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Home"})}),e.jsx("li",{children:e.jsx(v,{to:"/blog",className:"text-gray-400 hover:text-white transition-colors",children:"Blog"})}),e.jsx("li",{children:e.jsx(v,{to:"/videos",className:"text-gray-400 hover:text-white transition-colors",children:"Videos"})}),e.jsx("li",{children:e.jsx(v,{to:"/profile",className:"text-gray-400 hover:text-white transition-colors",children:"About"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Categories"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"Web Development"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"JavaScript"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"React & Next.js"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:"Cloud & DevOps"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Stay Updated"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Subscribe to our newsletter for the latest updates."}),e.jsxs("form",{className:"flex",children:[e.jsx("input",{type:"email",placeholder:"Your email",className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-600"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-r-lg transition-colors",children:"Subscribe"})]})]})]}),e.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center",children:e.jsxs("p",{className:"text-gray-400 flex items-center justify-center gap-2",children:["© ",a," ModernBlog. Made with",e.jsx(ae,{className:"w-4 h-4 text-red-500 fill-current"}),"by Your Name"]})})]})})}function ke(){const[a,t]=i.useState({x:0,y:0}),[s,r]=i.useState(!1),[n,o]=i.useState(!1),[d,l]=i.useState(!1),m={damping:25,stiffness:700},u=W(0,m),g=W(0,m);return i.useEffect(()=>{if((()=>{l("ontouchstart"in window||navigator.maxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches)})(),d)return;const b=h=>{t({x:h.clientX,y:h.clientY}),u.set(h.clientX-16),g.set(h.clientY-16)},y=h=>{const c=h.target,f=c.tagName==="A"||c.tagName==="BUTTON"||c.closest("a")!==null||c.closest("button")!==null||window.getComputedStyle(c).cursor==="pointer";r(f)},w=()=>{o(!0)},C=()=>{o(!1)};document.addEventListener("mousemove",b),document.addEventListener("mouseover",y),document.body.addEventListener("mouseleave",w),document.body.addEventListener("mouseenter",C),document.body.style.cursor="none";const E=document.createElement("style");return E.innerHTML=`
      * {
        cursor: none !important;
      }
      a, button, input, textarea, select {
        cursor: none !important;
      }
    `,document.head.appendChild(E),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseover",y),document.body.removeEventListener("mouseleave",w),document.body.removeEventListener("mouseenter",C),document.body.style.cursor="auto",document.head.removeChild(E)}},[u,g,d]),d?null:e.jsxs(e.Fragment,{children:[e.jsx(x.div,{className:"fixed pointer-events-none z-[9999] mix-blend-difference",style:{x:u,y:g,opacity:n?0:1},animate:{scale:s?1.5:1,backgroundColor:s?"#3b82f6":"#ffffff"},transition:{duration:.2},children:e.jsx("div",{className:"w-8 h-8 rounded-full"})}),e.jsx(x.div,{className:"fixed pointer-events-none z-[9998]",animate:{x:a.x-24,y:a.y-24,opacity:n?0:.3},transition:{type:"spring",damping:30,stiffness:200,mass:.5},children:e.jsx("div",{className:`w-12 h-12 rounded-full border-2 ${s?"border-blue-500":"border-white"} transition-colors duration-200`})}),s&&e.jsx(x.div,{className:"fixed pointer-events-none z-[9997]",initial:{scale:0,opacity:0},animate:{x:a.x-32,y:a.y-32,scale:1,opacity:.1},exit:{scale:0,opacity:0},transition:{duration:.3},children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-500"})})]})}function Se(){const[a,t]=i.useState(navigator.onLine);return i.useEffect(()=>{const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s),window.addEventListener("offline",r),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}},[]),e.jsx(_,{children:!a&&e.jsx(x.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",damping:25},className:"fixed top-0 left-0 right-0 z-50 bg-red-600 text-white py-3 px-4",children:e.jsxs("div",{className:"container mx-auto flex items-center justify-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"オフラインです - キャッシュされたコンテンツを表示しています"})]})})})}function Ce(){const[a,t]=i.useState({totalImages:0,loadedImages:0,failedImages:0,totalSize:0,averageLoadTime:0,formats:{}}),[s,r]=i.useState(!1);return i.useEffect(()=>{const n=[];let o=null;"PerformanceObserver"in window&&(o=new PerformanceObserver(l=>{for(const m of l.getEntries())if(m.entryType==="resource"&&m.name.match(/\.(jpg|jpeg|png|webp|avif|gif|svg)/i)){const u=m;u.duration>0&&n.push(u.duration);const g=m.name.split(".").pop()?.toLowerCase()||"unknown";t(p=>({...p,totalImages:p.totalImages+1,loadedImages:p.loadedImages+1,totalSize:p.totalSize+(u.transferSize||0),averageLoadTime:n.reduce((b,y)=>b+y,0)/n.length,formats:{...p.formats,[g]:(p.formats[g]||0)+1}}))}}),o.observe({entryTypes:["resource"]}));const d=()=>{t(l=>({...l,failedImages:l.failedImages+1}))};return window.addEventListener("error",d,!0),()=>{window.removeEventListener("error",d,!0),o?.disconnect()}},[]),null}function Ee(){const[a,t]=i.useState(!1),[s,r]=i.useState(null),[n,o]=i.useState(!1),[d,l]=i.useState("desktop");i.useEffect(()=>{(()=>{const y=window.matchMedia("(display-mode: standalone)").matches,w=window.navigator.standalone===!0;o(y||w)})(),(()=>{const y=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);l(y?"mobile":"desktop")})();const b=y=>{y.preventDefault(),r(y),setTimeout(()=>{localStorage.getItem("pwa-prompt-seen")||t(!0)},3e4)};return window.addEventListener("beforeinstallprompt",b),window.addEventListener("appinstalled",()=>{console.log("PWA was installed"),o(!0),t(!1)}),()=>{window.removeEventListener("beforeinstallprompt",b)}},[]);const m=async()=>{if(s)try{await s.prompt();const{outcome:g}=await s.userChoice;g==="accepted"?(console.log("User accepted the install prompt"),t(!1)):console.log("User dismissed the install prompt"),r(null)}catch(g){console.error("Error installing PWA:",g)}},u=()=>{t(!1),localStorage.setItem("pwa-prompt-seen","true")};return n||!s?null:e.jsxs(e.Fragment,{children:[!a&&e.jsx(x.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(!0),className:"fixed bottom-24 right-4 w-14 h-14 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full shadow-lg flex items-center justify-center z-40",children:e.jsx(re,{className:"w-6 h-6 text-white"})}),e.jsx(_,{children:a&&e.jsxs(e.Fragment,{children:[e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:u,className:"fixed inset-0 bg-black/50 z-50"}),e.jsxs(x.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{type:"spring",damping:25},className:"fixed inset-x-4 bottom-20 max-w-md mx-auto bg-white dark:bg-gray-900 rounded-2xl shadow-2xl z-50 overflow-hidden",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:d==="mobile"?e.jsx(ie,{className:"w-6 h-6 text-white"}):e.jsx(oe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"アプリをインストール"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"より快適な体験を"})]})]}),e.jsx("button",{onClick:u,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(P,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"オフラインでも閲覧可能"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"ホーム画面から素早くアクセス"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"プッシュ通知で最新情報をお届け"})]})]}),d==="mobile"&&/iPhone|iPad|iPod/i.test(navigator.userAgent)&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-300 mb-2",children:e.jsx("strong",{children:"インストール方法:"})}),e.jsxs("ol",{className:"text-sm text-blue-800 dark:text-blue-400 space-y-1",children:[e.jsx("li",{children:"1. 共有ボタン をタップ"}),e.jsx("li",{children:"2. 「ホーム画面に追加」を選択"}),e.jsx("li",{children:"3. 「追加」をタップ"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:u,className:"flex-1 py-3 px-4 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"後で"}),e.jsx("button",{onClick:m,className:"flex-1 py-3 px-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200",children:"インストール"})]})]}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-purple-500/10 rounded-full blur-3xl"})]})]})]})})]})}function Ie(){const[a,t]=i.useState(!1),[s,r]=i.useState(null);i.useEffect(()=>{if(!("serviceWorker"in navigator))return;(async()=>{const m=await navigator.serviceWorker.ready;m.addEventListener("updatefound",()=>{const u=m.installing;u&&u.addEventListener("statechange",()=>{u.state==="installed"&&navigator.serviceWorker.controller&&(r(u),t(!0))})})})(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(m=>{m.update()});const l=setInterval(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(m=>{m.update()})},60*60*1e3);return()=>clearInterval(l)},[]);const n=()=>{s&&(s.postMessage({type:"SKIP_WAITING"}),s.addEventListener("statechange",()=>{s.state==="activated"&&window.location.reload()}))},o=()=>{t(!1)};return e.jsx(_,{children:a&&e.jsx(x.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",damping:25},className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-white dark:bg-gray-900 rounded-xl shadow-2xl p-4 z-50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:e.jsx(ce,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"アップデートが利用可能です"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"新しい機能と改善が含まれています。今すぐアップデートしますか？"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors",children:"アップデート"}),e.jsx("button",{onClick:o,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"後で"})]})]}),e.jsx("button",{onClick:o,className:"flex-shrink-0 p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(P,{className:"w-4 h-4 text-gray-500"})})]})})})}function Le(){const[a,t]=i.useState("default"),[s,r]=i.useState(!1),[n,o]=i.useState(!1),[d,l]=i.useState(!1);i.useEffect(()=>{if("Notification"in window){t(Notification.permission),m();const h=setTimeout(()=>{Notification.permission==="default"&&!localStorage.getItem("notification-banner-dismissed")&&l(!0)},6e4);return()=>clearTimeout(h)}},[]);const m=async()=>{if("serviceWorker"in navigator&&"PushManager"in window)try{const c=await(await navigator.serviceWorker.ready).pushManager.getSubscription();r(!!c)}catch(h){console.error("Error checking subscription:",h)}},u=async()=>{o(!0);try{const h=await Notification.requestPermission();t(h),h==="granted"&&await g()}catch(h){console.error("Error requesting permission:",h)}finally{o(!1)}},g=async()=>{if(!("serviceWorker"in navigator)||!("PushManager"in window)){console.error("Push notifications not supported");return}try{const f=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:E("YOUR_VAPID_PUBLIC_KEY")});await b(f),r(!0),w()}catch(h){console.error("Error subscribing to notifications:",h)}},p=async()=>{o(!0);try{const c=await(await navigator.serviceWorker.ready).pushManager.getSubscription();c&&(await c.unsubscribe(),await y(c),r(!1))}catch(h){console.error("Error unsubscribing:",h)}finally{o(!1)}},b=async h=>{console.log("Sending subscription to server:",h),localStorage.setItem("push-subscription",JSON.stringify(h))},y=async h=>{console.log("Removing subscription from server:",h),localStorage.removeItem("push-subscription")},w=()=>{"serviceWorker"in navigator&&"Notification"in window&&Notification.permission==="granted"&&navigator.serviceWorker.ready.then(h=>{h.showNotification("HiroSuwa",{body:"通知が正常に設定されました！",icon:"/icon-192.png",badge:"/icon-192.png",data:{dateOfArrival:Date.now(),primaryKey:1}})})},C=()=>{l(!1),localStorage.setItem("notification-banner-dismissed","true")};function E(h){const c="=".repeat((4-h.length%4)%4),f=(h+c).replace(/\-/g,"+").replace(/_/g,"/"),I=window.atob(f),A=new Uint8Array(I.length);for(let N=0;N<I.length;++N)A[N]=I.charCodeAt(N);return A}return"Notification"in window?e.jsxs(e.Fragment,{children:[d&&a==="default"&&e.jsx(x.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},className:"fixed top-0 left-0 right-0 bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 shadow-lg z-40",children:e.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("p",{className:"text-sm md:text-base",children:"最新の記事やアップデートの通知を受け取りますか？"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:u,disabled:n,className:"px-4 py-2 bg-white/20 backdrop-blur-sm rounded-lg hover:bg-white/30 transition-colors flex items-center gap-2",children:[n?e.jsx(z,{className:"w-4 h-4 animate-spin"}):e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:"許可する"})]}),e.jsx("button",{onClick:C,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(P,{className:"w-4 h-4"})})]})]})}),e.jsxs("div",{className:"inline-flex items-center gap-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"プッシュ通知"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a==="granted"&&s?"新しい記事の通知を受け取ります":a==="granted"?"通知は許可されていますが、購読していません":a==="denied"?"通知がブロックされています":"通知を有効にして最新情報を受け取る"})]}),e.jsx("button",{onClick:s?p:u,disabled:n||a==="denied",className:`p-3 rounded-lg transition-all ${s?"bg-green-500 text-white hover:bg-green-600":a==="denied"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:n?e.jsx(z,{className:"w-5 h-5 animate-spin"}):s?e.jsx(M,{className:"w-5 h-5"}):e.jsx(le,{className:"w-5 h-5"})})]})]}):null}function _e(){const[a,t]=i.useState(null),[s,r]=i.useState("today"),[n,o]=i.useState(!0),[d,l]=i.useState(!1);i.useEffect(()=>{const u=g=>{(g.ctrlKey||g.metaKey)&&g.shiftKey&&g.key==="A"&&l(p=>!p)};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[]),i.useEffect(()=>{d&&m()},[d,s]);const m=async()=>{o(!0),setTimeout(()=>{t({pageViews:12543,uniqueVisitors:3421,avgSessionDuration:245,bounceRate:42.3,topPages:[{path:"/",views:4523},{path:"/blog",views:2341},{path:"/profile",views:1876},{path:"/videos",views:1543},{path:"/contact",views:987}],deviceTypes:{desktop:58,mobile:37,tablet:5},topCountries:[{country:"日本",visitors:2876},{country:"アメリカ",visitors:234},{country:"イギリス",visitors:123},{country:"カナダ",visitors:98},{country:"オーストラリア",visitors:90}],realtimeUsers:42,errors:[{message:"Failed to load image",count:23,lastSeen:"5分前"},{message:"Network timeout",count:12,lastSeen:"12分前"},{message:"Script error",count:5,lastSeen:"1時間前"}]}),o(!1)},1e3)};return null}class L{static instance;assignments=new Map;results=new Map;constructor(){const t=localStorage.getItem("ab_test_assignments");if(t)try{const r=JSON.parse(t);this.assignments=new Map(Object.entries(r))}catch(r){console.error("Failed to load AB test assignments:",r)}const s=localStorage.getItem("ab_test_results");if(s)try{const r=JSON.parse(s);this.results=new Map(Object.entries(r))}catch(r){console.error("Failed to load AB test results:",r)}}static getInstance(){return L.instance||(L.instance=new L),L.instance}getVariant(t,s){const r=this.assignments.get(t);if(r)return r;const n=(s?.A||50)+(s?.B||50),d=Math.random()*n<(s?.A||50)?"A":"B";return this.assignments.set(t,d),this.saveAssignments(),this.recordImpression(t,d),d}recordImpression(t,s){const r=`${t}_${s}`,n=this.results.get(r)||{variant:s,conversions:0,impressions:0};n.impressions++,this.results.set(r,n),this.saveResults()}recordConversion(t){const s=this.assignments.get(t);if(!s)return;const r=`${t}_${s}`,n=this.results.get(r)||{variant:s,conversions:0,impressions:0};n.conversions++,this.results.set(r,n),this.saveResults(),typeof window<"u"&&window.gtag&&window.gtag("event","ab_test_conversion",{test_id:t,variant:s,event_category:"AB Test"})}getResults(t){const s=this.results.get(`${t}_A`)||{variant:"A",conversions:0,impressions:0},r=this.results.get(`${t}_B`)||{variant:"B",conversions:0,impressions:0},n=s.impressions>0?s.conversions/s.impressions:0,o=r.impressions>0?r.conversions/r.impressions:0;return{A:{...s,conversionRate:n},B:{...r,conversionRate:o},winner:n>o?"A":o>n?"B":null,confidence:this.calculateConfidence(s,r)}}calculateConfidence(t,s){if(t.impressions<100||s.impressions<100)return 0;const r=t.conversions/t.impressions,n=s.conversions/s.impressions,o=(t.conversions+s.conversions)/(t.impressions+s.impressions),d=Math.sqrt(o*(1-o)*(1/t.impressions+1/s.impressions)),l=Math.abs(r-n)/d;return l>=2.58?99:l>=1.96?95:l>=1.64?90:Math.min(l*50,89)}saveAssignments(){const t=Object.fromEntries(this.assignments);localStorage.setItem("ab_test_assignments",JSON.stringify(t))}saveResults(){const t=Object.fromEntries(this.results);localStorage.setItem("ab_test_results",JSON.stringify(t))}resetTest(t){this.assignments.delete(t),this.results.delete(`${t}_A`),this.results.delete(`${t}_B`),this.saveAssignments(),this.saveResults()}}function et(a){const t=L.getInstance(),[s]=i.useState(()=>t.getVariant(a.id,a.weights)),r=()=>{t.recordConversion(a.id)};return{variant:s,value:a.variants[s],recordConversion:r}}L.getInstance();function Pe(){const[a,t]=i.useState(!1),[s]=i.useState([{id:"hero_cta",name:"ヒーローセクションCTA",description:"CTAボタンのテキストとスタイルを最適化",status:"running"},{id:"blog_card_layout",name:"ブログカードレイアウト",description:"カードのレイアウトとコンテンツ表示を最適化",status:"running"},{id:"contact_form",name:"お問い合わせフォーム",description:"フォームのレイアウトとCTAを最適化",status:"running"}]);return i.useEffect(()=>{const r=n=>{(n.ctrlKey||n.metaKey)&&n.shiftKey&&n.key==="T"&&t(o=>!o)};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[]),null}function Ae(){pe();const[a,t]=i.useState([]),[s,r]=i.useState("pending"),[n,o]=i.useState(!1);i.useEffect(()=>{const l=m=>{(m.ctrlKey||m.metaKey)&&m.shiftKey&&m.key==="M"&&o(u=>!u)};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[]),i.useEffect(()=>{n&&d()},[n,s]);const d=()=>{const l=[],m=fe.comments;for(const[u,g]of m)g.forEach(p=>{(s==="all"||p.status===s)&&l.push({...p,postId:u})});l.sort((u,g)=>new Date(g.createdAt).getTime()-new Date(u.createdAt).getTime()),t(l)};return null}const D="G-XXXXXXXXXX";function Te(){if(typeof window>"u"||!D)return;const a=document.createElement("script");a.async=!0,a.src=`https://www.googletagmanager.com/gtag/js?id=${D}`,document.head.appendChild(a),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",D,{send_page_view:!1,cookie_flags:"SameSite=None;Secure"})}function De({name:a,delta:t,id:s}){typeof window>"u"||!window.gtag||window.gtag("event",a,{event_category:"Web Vitals",event_label:s,value:Math.round(a==="CLS"?t*1e3:t),non_interaction:!0})}const Me=i.lazy(()=>S(()=>import("./PremiumHomePage-I57hayTA.js"),__vite__mapDeps([0,1,2,3,4]))),Oe=i.lazy(()=>S(()=>import("./BlogList-Dz8WHvuW.js"),__vite__mapDeps([5,1,2,4,3]))),Re=i.lazy(()=>S(()=>import("./BlogPost-C1PxGipO.js"),__vite__mapDeps([6,1,2,7,3,8]))),We=i.lazy(()=>S(()=>import("./VideosPage-BW6gDfOR.js"),__vite__mapDeps([9,1,4]))),ze=i.lazy(()=>S(()=>import("./UpdatedProfilePage-BdZSQ1cY.js"),__vite__mapDeps([10,1,4,3]))),Be=i.lazy(()=>S(()=>import("./ContactPage-CjJ6mxU9.js"),__vite__mapDeps([11,1,4]))),Fe=i.lazy(()=>S(()=>import("./CodeDemoPage-D3ALOdrR.js"),__vite__mapDeps([12,1,7]))),$e=i.lazy(()=>S(()=>import("./BookmarksDashboard-DOlftqH-.js"),__vite__mapDeps([13,1,8])));function Ke(){return e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gray-200 rounded-full"}),e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 rounded-full absolute top-0 left-0 animate-spin border-t-transparent"})]})})}function Ve(){return e.jsx(de,{children:e.jsxs(me,{children:[e.jsx(ke,{}),e.jsx(Se,{}),e.jsx(Ce,{}),e.jsx(Ee,{}),e.jsx(Ie,{}),e.jsx(Le,{}),e.jsx(_e,{}),e.jsx(Pe,{}),e.jsx(Ae,{}),e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(je,{}),e.jsx("main",{className:"flex-1",children:e.jsx(i.Suspense,{fallback:e.jsx(Ke,{}),children:e.jsxs(ue,{children:[e.jsx(k,{path:"/",element:e.jsx(Me,{})}),e.jsx(k,{path:"/blog",element:e.jsx(Oe,{})}),e.jsx(k,{path:"/post/:slug",element:e.jsx(Re,{})}),e.jsx(k,{path:"/videos",element:e.jsx(We,{})}),e.jsx(k,{path:"/profile",element:e.jsx(ze,{})}),e.jsx(k,{path:"/contact",element:e.jsx(Be,{})}),e.jsx(k,{path:"/code-samples",element:e.jsx(Fe,{})}),e.jsx(k,{path:"/library",element:e.jsx($e,{})})]})})}),e.jsx(Ne,{})]})]})})}function Ue(a){a.label==="web-vital"&&console.log(a)}function He(){const a=document.head;["https://cdn.sanity.io","https://fonts.googleapis.com","https://fonts.gstatic.com"].forEach(r=>{const n=document.createElement("link");n.rel="dns-prefetch",n.href=r,a.appendChild(n)}),["https://cdn.sanity.io","https://fonts.googleapis.com"].forEach(r=>{const n=document.createElement("link");n.rel="preconnect",n.href=r,n.crossOrigin="anonymous",a.appendChild(n)})}async function Je(){if("serviceWorker"in navigator)try{const a=await navigator.serviceWorker.register("/sw.js");return console.log("Service Worker registered:",a),a.addEventListener("updatefound",()=>{const t=a.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&(console.log("New content available, please refresh"),confirm("新しいバージョンが利用可能です。リロードしますか？")&&window.location.reload())})}),a}catch(a){console.error("Service Worker registration failed:",a)}}let T;function Xe(){window.addEventListener("beforeinstallprompt",a=>{a.preventDefault(),T=a,Ye()})}function Ye(){const a=document.getElementById("install-button");a&&(a.style.display="block",a.addEventListener("click",Ge))}async function Ge(){if(!T)return;T.prompt();const{outcome:a}=await T.userChoice;console.log(a==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),T=null}function qe(){window.addEventListener("online",()=>{console.log("Back online"),document.body.classList.remove("offline")}),window.addEventListener("offline",()=>{console.log("Gone offline"),document.body.classList.add("offline")})}Te();He();"web-vital"in window&&Ue(a=>{console.log(a),De(a)});Je();Xe();qe();he.createRoot(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(Ve,{})}));export{Qe as a,et as u};
